# üì± –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç - –û—Ç—á–µ—Ç

## üéØ –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –≤–∞–ª—é—Ç —Å backend'–∞, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã (–≤–∫–ª—é—á–∞—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã) –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üîç –ü—Ä–æ–±–ª–µ–º–∞
- iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å –Ω–∞–∑–≤–∞–Ω–∏–π –≤–∞–ª—é—Ç
- –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–∞–ª—é—Ç —Ç—Ä–µ–±–æ–≤–∞–ª–∞—Å—å –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Backend API –≤–æ–∑–≤—Ä–∞—â–∞–ª —Ç–æ–ª—å–∫–æ –∫–æ–¥—ã –≤–∞–ª—é—Ç –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏–π

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å Rate
**–§–∞–π–ª:** `backend/app/models/rate.py`
```python
class Rate(Base):
    __tablename__ = "rates"
    
    id = Column(Integer, primary_key=True, autoincrement=True)
    code = Column(String(3), nullable=False, unique=True, index=True)
    name = Column(String(100), nullable=False)  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ name
    value = Column(Numeric(18, 6), nullable=False)
    updated_at = Column(DateTime(timezone=True), nullable=False, default=func.now())
```

#### 2. –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª:** `backend/alembic/versions/add_name_field_to_rates.py`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `name` –≤ —Ç–∞–±–ª–∏—Ü—É `rates`
- –ó–∞–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–∞–ª—é—Ç (150+ –≤–∞–ª—é—Ç)
- –í–∫–ª—é—á–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç (BTC, ETH –∏ –¥—Ä.)

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Å—Ö–µ–º–∞ API
**–§–∞–π–ª:** `backend/app/schemas.py`
```python
class CurrencyNamesResponse(BaseModel):
    """–û—Ç–≤–µ—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≤–∞–ª—é—Ç"""
    model_config = ConfigDict(from_attributes=True)
    
    updated_at: datetime
    names: Dict[str, str]  # –ù–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç: {"USD": "–î–æ–ª–ª–∞—Ä –°–®–ê", "EUR": "–ï–≤—Ä–æ"}
```

#### 4. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π API endpoint
**–§–∞–π–ª:** `backend/app/routes/rates.py`
```python
@router.get("/currency-names", response_model=CurrencyNamesResponse)
async def get_currency_names(db: AsyncSession = Depends(get_db)) -> CurrencyNamesResponse:
    """
    –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–ª—é—Ç
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à Redis
    # –ï—Å–ª–∏ –∫—ç—à–∞ –Ω–µ—Ç - —á–∏—Ç–∞–µ—Ç –∏–∑ –ë–î
    # –ö—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ 24 —á–∞—Å–∞
```

### iOS –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å –¥–ª—è API –æ—Ç–≤–µ—Ç–∞
**–§–∞–π–ª:** `frontend/ios/Convertik/Models/APIModels.swift`
```swift
struct CurrencyNamesResponse: Codable {
    let updatedAt: Date
    let names: [String: String]

    enum CodingKeys: String, CodingKey {
        case updatedAt = "updated_at"
        case names
    }
}
```

#### 2. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –≤ APIService
**–§–∞–π–ª:** `frontend/ios/Convertik/Services/APIService.swift`
```swift
func fetchCurrencyNames() async throws -> CurrencyNamesResponse {
    let url = baseURL.appendingPathComponent("currency-names")
    // ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
}
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω RatesRepository
**–§–∞–π–ª:** `frontend/ios/Convertik/Services/RatesRepository.swift`
```swift
func syncRemote() async {
    do {
        let response = try await apiService.fetchRates()
        let namesResponse = try await apiService.fetchCurrencyNames()  // ‚úÖ –ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
        await updateLocalRates(from: response, names: namesResponse.names)
    } catch {
        self.error = error
    }
}

private func updateLocalRates(from response: RatesResponse, names: [String: String]) async {
    // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç –∏–∑ API –≤ CoreData
    for (code, value) in response.rates {
        _ = self.createOrUpdateRate(
            code: code,
            name: names[code] ?? code,  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑ API
            value: 1.0 / value,
            updatedAt: response.updatedAt,
            in: context
        )
    }
}
```

#### 4. –£–ø—Ä–æ—â–µ–Ω–∞ –º–æ–¥–µ–ª—å Rate
**–§–∞–π–ª:** `frontend/ios/Convertik/Models/Rate.swift`
```swift
struct Rate: Codable, Identifiable, Hashable {
    let code: String
    let name: String  // ‚úÖ –¢–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ CoreData
    let value: Double
    let updatedAt: Date

    var displayName: String {
        name  // ‚úÖ –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç name –∏–∑ CoreData
    }
}
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ù–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å backend'–∞
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
- ‚úÖ BTC (–ë–∏—Ç–∫–æ–∏–Ω)
- ‚úÖ ETH (–≠—Ñ–∏—Ä–∏—É–º) - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
- ‚úÖ –î—Ä—É–≥–∏–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Backend –∫—ç—à–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞ 24 —á–∞—Å–∞
- ‚úÖ iOS –∫—ç—à–∏—Ä—É–µ—Ç –≤ CoreData
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 4. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–¥ –≤–∞–ª—é—Ç—ã
- ‚úÖ Graceful fallback

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚ùå 10 –≤–∞–ª—é—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚ùå –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- ‚ùå –¢—Ä–µ–±–æ–≤–∞–ª–∞—Å—å –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –≤–∞–ª—é—Ç

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚úÖ 150+ –≤–∞–ª—é—Ç –∏–∑ API
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Backend API endpoints:
1. `GET /api/v1/rates` - –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
2. `GET /api/v1/currency-names` - –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç (–Ω–æ–≤—ã–π)

### iOS —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
2. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ CoreData —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
4. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ UI

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –≤–∞–ª—é—Ç —Å backend'–∞. –¢–µ–ø–µ—Ä—å:

- **Backend** –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã –∏ –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏—è
- **iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –≤–∏–¥—è—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏** –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ 