

# IOS.md  
> ðŸ“± ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ ÐºÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Â«ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸ÐºÂ» Ð´Ð»Ñ iOS  

Ð’ÐµÑ€ÑÐ¸Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°: 1.0 (31â€¯Ð¸ÑŽÐ»Ñâ€¯2025)  

---

## 1. Ð¦ÐµÐ»Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

* **ÐœÐ³Ð½Ð¾Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ€Ð°ÑÑ‡Ñ‘Ñ‚ Ð²Ð°Ð»ÑŽÑ‚** Ð´Ð°Ð¶Ðµ Ð¾Ñ„â€‘Ð»Ð°Ð¹Ð½.  
* **ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ UXâ€‘ÑˆÐ°Ð³**â€¯â€” Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒ â†’ Ð²Ð²ÐµÑÑ‚Ð¸ ÑÑƒÐ¼Ð¼Ñƒ â†’ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚.  
* **ÐœÐ¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ**: Ñ€ÐµÐºÐ»Ð°Ð¼Ð° AdMob Ð´Ð»Ñ freeâ€‘Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° Premium Ð±ÐµÐ· Ñ€ÐµÐºÐ»Ð°Ð¼Ñ‹.  
* **Ð¡Ð±Ð¾Ñ€ Ð°Ð½Ð¾Ð½Ð¸Ð¼Ð½Ð¾Ð¹ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ¸** (DAU/MAU, ÐºÐ¾Ð½Ð²ÐµÑ€ÑÐ¸Ð¸) Ñ ÑƒÐ²Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼ Ðº Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ð¾ÑÑ‚Ð¸.  

---

## 2. ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ (User Stories)

| ID | ÐšÐ°Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ, Ñ Ñ…Ð¾Ñ‡Ñƒ â€¦ | Ð§Ñ‚Ð¾Ð±Ñ‹ â€¦ | ÐŸÑƒÑ‚ÑŒ (HappyÂ Path) |
|----|---------------------------|---------|-------------------|
| USâ€‘01 | Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾ Ð²Ð¸Ð´ÐµÑ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¼Ð¾Ð¸Ñ… Ð²Ð°Ð»ÑŽÑ‚ | Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ð¾Ñ†ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ | Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ â†’ ÑÑ€Ð°Ð·Ñƒ Ð²Ð¸Ð¶Ñƒ ÑÐ¿Ð¸ÑÐ¾Ðº â†’ Ð²Ð²Ð¾Ð¶Ñƒ ÑÑƒÐ¼Ð¼Ñƒ |
| USâ€‘02 | Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ Ð²Ð°Ð»ÑŽÑ‚Ñƒ | ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐ´ÐºÐ¸Ðµ Ð²Ð°Ð»ÑŽÑ‚Ñ‹ | Ñ‚Ð°Ð¿ `+` â†’ Ð¿Ð¾Ð¸ÑÐº â†’ Ñ‚Ð°Ð¿ Ð¿Ð¾ Ð²Ð°Ð»ÑŽÑ‚Ðµ â†’ Ð¾Ð½Ð° Ð² ÑÐ¿Ð¸ÑÐºÐµ |
| USâ€‘03 | ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²Ð°Ð»ÑŽÑ‚Ñƒ | Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¼ | ÑÐ²Ð°Ð¹Ð¿ Ð²Ð»ÐµÐ²Ð¾ Ð¿Ð¾ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐµ â†’ Â«Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒÂ» |
| USâ€‘04 | Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÑƒÑ€ÑÑ‹ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ | Ð±Ñ‹Ñ‚ÑŒ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ñ‹Ð¼ Ð² Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ | Ñ‚ÑÐ½Ñƒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð²Ð½Ð¸Ð· â†’ Ð²Ð¸Ð¶Ñƒ ÑÐ¿Ð¸Ð½Ð½ÐµÑ€ â†’ Ð´Ð°Ñ‚Ð° Â«Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾: ÑÐµÐ¹Ñ‡Ð°ÑÂ» |
| USâ€‘05 | Ð¾Ñ„â€‘Ð»Ð°Ð¹Ð½ Ð¿Ð¾ÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÐºÑƒÑ€Ñ | Ð½ÐµÑ‚ ÑÐµÑ‚Ð¸ Ð² Ñ€Ð¾ÑƒÐ¼Ð¸Ð½Ð³Ðµ | Ð·Ð°Ð¿ÑƒÑÐºÐ°ÑŽ Ð¾Ñ„â€‘Ð»Ð°Ð¹Ð½ â†’ Ð²Ð¸Ð¶Ñƒ ÐºÑƒÑ€ÑÑ‹, ÑÐ¾Ñ…Ñ€Ð°Ð½Ñ‘Ð½Ð½Ñ‹Ðµ Ñ€Ð°Ð½ÐµÐµ |
| USâ€‘06 | ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ Premium | ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ Ñ€ÐµÐºÐ»Ð°Ð¼Ñƒ | Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽ Â«ÐŸÑ€ÐµÐ¼Ð¸ÑƒÐ¼Â» â†’ Ð½Ð°Ð¶Ð¸Ð¼Ð°ÑŽ Â«ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑÂ»Â â†’ FaceÂ IDÂ â†’ Ñ€ÐµÐºÐ»Ð°Ð¼Ð° Ð¸ÑÑ‡ÐµÐ·Ð»Ð° |
| USâ€‘07 | Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ | Ð¿ÐµÑ€ÐµÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð» Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ | Â«ÐŸÑ€ÐµÐ¼Ð¸ÑƒÐ¼Â»Â â†’ Â«Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒÂ»Â â†’ ÑÑ‚Ð°Ñ‚ÑƒÑ Premium Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ |
| USâ€‘08 | ÑÐ¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ‚ÐµÐ¼Ñƒ | ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð¾Ñ‡ÑŒÑŽ | Â«ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸Â»Â â†’ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Â«Ð¢Ñ‘Ð¼Ð½Ð°Ñ Ñ‚ÐµÐ¼Ð°Â» |
| USâ€‘09 | Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ push Â«ÐºÑƒÑ€Ñ EUR Ð²Ñ‹Ñ€Ð¾ÑÂ» | Ð²Ð¾Ð²Ñ€ÐµÐ¼Ñ Ñ€ÐµÐ°Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ | Ñ€Ð°Ð·Ñ€ÐµÑˆÐ°ÑŽ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ â†’ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÑŽ push â†’ Ñ‚Ð°Ð¿ â†’ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ |

---

## 3. ÐÐ°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð° ÑÐºÑ€Ð°Ð½Ð¾Ð²

```
LaunchScreen
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       Â«+Â»        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MainListView â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ AddCurrencyView â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚  â”‚Settings                â†‘ SearchBar
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Â«PremiumÂ»   â”‚
   â–¼              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SettingsView  â”‚
â”‚  â€¢ Theme        â”‚
â”‚  â€¢ Premium âŸ¶â”€â”€â”€â”€â”¼â”€â”€â–º PaywallView (StoreKit2)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

* **MainListView** (root)  
  - ÐÐ°Ð²â€‘Ð±Ð°Ñ€: Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Â«ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸ÐºÂ» + Ð´Ð°Ñ‚Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ.  
  - Body: `List` Ð²Ð°Ð»ÑŽÑ‚Ð½Ñ‹Ñ… ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº.  
  - Toolbar: `+` (AddCurrency), ÑˆÐµÑÑ‚ÐµÑ€Ñ‘Ð½ÐºÐ° (Settings).  
  - Bottom: `BannerAdView` (ÐµÑÐ»Ð¸ `!isPremium`).

* **AddCurrencyView**  
  - SearchBar (Combine debounce).  
  - Section Â«ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹ÐµÂ» (USD, EUR, GBPâ€¦).  
  - Section Â«Ð’ÑÐµ Ð²Ð°Ð»ÑŽÑ‚Ñ‹Â» (Ð°Ð»Ñ„Ð°Ð²Ð¸Ñ‚).  

* **SettingsView**  
  - Toggle Â«Ð¢Ñ‘Ð¼Ð½Ð°Ñ Ñ‚ÐµÐ¼Ð°Â» (ColorScheme).  
  - Â«PremiumÂ» â†’ Paywall.  
  - Ð¡ÑÑ‹Ð»ÐºÐ¸: ÐŸÐ¾Ð»Ð¸Ñ‚Ð¸ÐºÐ°, Ð£ÑÐ»Ð¾Ð²Ð¸Ñ.  
  - Ð’ÐµÑ€ÑÐ¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.

* **PaywallView**  
  - ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð².  
  - ÐšÐ½Ð¾Ð¿ÐºÐ° `ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð·Ð° 199â€¯â‚½/Ð¼ÐµÑ`.  
  - `StoreKit2.ProductView`.  
  - ÐšÐ½Ð¾Ð¿ÐºÐ° `Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ`.

---

## 4. ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

### 4.1 Ð¡Ñ‚ÐµÐº

| Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ              | Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸                   |
|----------------------|------------------------------|
| UI                   | SwiftUI 5, Declarative UI    |
| Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ            | MVVM + Combine (`@StateObject`/`@Published`) |
| Ð¥Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð¾Ñ„â€‘Ð»Ð°Ð¹Ð½    | CoreData (`RateEntity`)      |
| Ð¡ÐµÑ‚ÑŒ                 | `URLSession` + async/await   |
| Ð¤Ð¾Ð½Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸       | BackgroundTasks (`BGAppRefreshTask`) |
| ÐœÐ¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ          | GoogleÂ MobileÂ AdsÂ SDK, StoreKit2 |
| Push                 | `UNUserNotificationCenter`, APNs |
| ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°            | AppMetrica SDK               |
| DI (Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»Ð¸Ð·Ð¼)      | `@Environment(\.inject)` â€” lightweight |

### 4.2 Ð¡Ð»Ð¾Ð¸ / ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¸

```
Sources/
 â”œ App/                  # App entry, SceneDelegate
 â”œ Modules/
 â”‚   â”œ MainCurrencyList/
 â”‚   â”‚   â”œ Views/
 â”‚   â”‚   â”œ ViewModel/
 â”‚   â”‚   â”” Tests/
 â”‚   â”œ AddCurrency/
 â”‚   â”œ Settings/
 â”‚   â”” Paywall/
 â”œ Services/
 â”‚   â”œ RatesService.swift      # fetch /rates
 â”‚   â”œ ConversionService.swift # math operations
 â”‚   â”œ AnalyticsService.swift  # AppMetrica wrappers
 â”‚   â”œ IAPService.swift        # StoreKit2 helpers
 â”‚   â”” AdService.swift         # AdMob wrappers
 â”œ Persistence/
 â”‚   â”œ CoreDataStack.swift
 â”‚   â”” RateEntity+Ext.swift
 â”” Resources/                 # Assets, Localizable.strings
```

### 4.3 ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ»Ð°ÑÑÑ‹

* `RatesRepository`  
  - `func localRates() -> [Rate]` (CoreData)  
  - `func syncRemote() async throws` (GET /rates)  
  - ÐºÐµÑˆÐ¸Ñ€ÑƒÐµÑ‚ Ð´Ð°Ñ‚Ñƒ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ, Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ `Notification` Ð¿Ñ€Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¸.

* `MainListViewModel`  
  - `@Published var items: [CurrencyRowModel]`  
  - Binding Ðº TextField: onChange Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚.

* `ConversionService`  
  - `func convert(_ amount: Double, from: Rate, to: Rate) -> Double`.

* `BackgroundScheduler`  
  - Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐµÑ‚ `BGAppRefreshTask` (Â«com.azg.convertik.refreshÂ») ÐºÐ°Ð¶Ð´Ñ‹Ðµ 6â€¯Ñ‡.

---

## 5. Ð‘Ð¸Ð·Ð½ÐµÑâ€‘Ð»Ð¾Ð³Ð¸ÐºÐ°

### 5.1 Ð Ð°ÑÑ‡Ñ‘Ñ‚

```swift
func convert(_ amount: Double, from: Rate, to: Rate) -> Double {
    guard from.value > 0 else { return 0 }
    let rub = amount * from.value     // amount â†’ Ñ€ÑƒÐ±Ð»Ð¸
    return rub / to.value             // â†’ Ñ†ÐµÐ»ÐµÐ²Ð°Ñ Ð²Ð°Ð»ÑŽÑ‚Ð°
}
```

### 5.2 Ð Ð°Ð±Ð¾Ñ‚Ð° Ð¾Ñ„â€‘Ð»Ð°Ð¹Ð½

1. ÐŸÑ€Ð¸ `AppDelegate.application(_:didFinishLaunching)` CoreData Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ `RateEntity`.  
2. Ð•ÑÐ»Ð¸ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð¿ÑƒÑÑ‚Ñ‹ â†’ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ placeholder Â«ÐÑƒÐ¶ÐµÐ½ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚ Ð´Ð»Ñ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°Â».  
3. `RatesService.syncRemote()` Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ, Ð½Ð¾ UI Ð½Ðµ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚ÑÑ.  
4. Ð’ Ð¾Ñ„â€‘Ð»Ð°Ð¹Ð½ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ Ð¿Ð¾Ð»Ðµ Ð´Ð°Ñ‚Ñ‹ Ð¿Ð¾Ð´ÑÐ²ÐµÑ‡ÐµÐ½Ð¾ ÑÐµÑ€Ñ‹Ð¼, ÐºÑƒÑ€ÑÐ¸Ð²: _Â«ÐšÑƒÑ€ÑÑ‹ Ð½Ð° 29.07Â»_.  

### 5.3 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð² Ñ„Ð¾Ð½Ðµ

```swift
BGTaskScheduler.shared.register(forTaskWithIdentifier: "com.azg.convertik.refresh", using: nil) { task in
    await RatesService.shared.syncRemote()
    task.setTaskCompleted(success: true)
}
```

Ð¸ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑƒÑ…Ð¾Ð´Ðµ Ð² background.

---

## 6. ÐœÐ¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ

### 6.1 Ð ÐµÐºÐ»Ð°Ð¼Ð°

* Ð‘Ð»Ð¾Ðºâ€‘Ð¸Ð´: `ca-app-pubâ€‘xxx/banner_main_bottom`.  
* ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ `!Premium`.  
* ÐŸÑ€Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ Premium â†’ Ð±Ð°Ð½Ð½ÐµÑ€ ÑÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð°Ð½Ð¸Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¼ `opacity`.

### 6.2 ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ°

* `ProductID`: `convertik_premium_month`.  
* Ð¦ÐµÐ½Ð°: 199â€¯â‚½ Ð² RU, TierÂ 3 Ð² Ã¼brigen Regionen.  
* ÐžÐ´Ð¸Ð½ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹ Trial 7Â Ð´Ð½ÐµÐ¹.  
* ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°: `Transaction.currentEntitlements`.  
* Ð¡ÐµÑ€Ð²ÐµÑ€ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ `/iap/verify` Ð´Ð»Ñ Ð´Ð¾Ð¿.Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸ (antiâ€‘fraud).  

---

## 7. Analytics events

| Event            | ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹            | Ð¢Ñ€Ð¸Ð³Ð³ÐµÑ€                     |
|------------------|----------------------|-----------------------------|
| app_open         | none                 | `onAppear` MainListView     |
| conversion       | from,to,amount       | `onCommit` TextField        |
| ad_impression    | ad_unit_id           | delegate AdMob              |
| subscribe_start  | plan_id              | Tap ÐºÐ½Ð¾Ð¿ÐºÐ¸ Â«ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑÂ»    |
| subscribe_success| plan_id, price       | `Transaction` success       |
| subscribe_cancel | plan_id              | S2S notification            |

---

## 8. Ð›Ð¾ÐºÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ

* **Ð¯Ð·Ñ‹ÐºÐ¸**: ru, en (Base).  
* Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ `String(localized:)`, Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ `Localizable.strings`.  
* Ð§Ð¸ÑÐ»Ð° Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· `NumberFormatter` Ñ ÑƒÑ‡Ñ‘Ñ‚Ð¾Ð¼ `Locale.current`.

---

## 9. Accessibility (A11y)

* ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° **Dynamic Type** â€“ ÑˆÑ€Ð¸Ñ„Ñ‚Ñ‹ `font(.body)` Ð¸ Ñ‚.Ð¿.  
* Ð’ÑÐµ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸Ð¼ÐµÑŽÑ‚ `accessibilityLabel`.  
* Ð‘Ð°Ð½Ð½ÐµÑ€ AdMob Ð¿Ð¾Ð¼ÐµÑ‡Ð°ÐµÑ‚ÑÑ `accessibilityHidden = true`.  
* ÐšÐ¾Ð½Ñ‚Ñ€Ð°ÑÑ‚ Ñ†Ð²ÐµÑ‚Ð¾Ð² â€” Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· Xcode Accessibility Inspector.

---

## 10. Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

| Ð¢Ð¸Ð¿        | Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼                         |
|------------|---------------------------------------|
| Unit       | `ConversionService`, `RatesRepository` |
| Snapshot   | MainListView (Ñ Ð¸ Ð±ÐµÐ· Premium)        |
| UIâ€‘Ñ‚ÐµÑÑ‚Ñ‹   | Ð¡Ñ†ÐµÐ½Ð°Ñ€Ð¸Ð¹ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð²Ð°Ð»ÑŽÑ‚Ñ‹            |
| StoreKit   | Sandboxâ€‘Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° + restore            |
| ÐŸÐµÑ€Ñ„Ð¾Ð¼Ð°Ð½Ñ  | Coldâ€‘start (measure block)            |

---

## 11. Build & Run

```bash
# ÐŸÑ€ÐµÐ´ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
brew install swiftlint
# Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
xcodebuild -resolvePackageDependencies
# Ð›Ð¸Ð½Ñ‚
swiftlint
# Ð¢ÐµÑÑ‚Ñ‹
xcodebuild test -scheme Convertik -destination "platform=iOS Simulator,name=iPhone 15"
```

---

## 12. Ð‘ÑƒÐ´ÑƒÑ‰Ð¸Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ (Backlog)

* Ð’Ð¸Ð´Ð¶ÐµÑ‚ Ð½Ð° HomeÂ Screen (iOSÂ 17 WidgetBundle).  
* WatchÂ OSâ€‘Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¼ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€Ð¾Ð¼.  
* Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ ÐºÑƒÑ€ÑÐ¾Ð² (Storage + Ð³Ñ€Ð°Ñ„Ð¸Ðº).  
* Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Â«ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÑƒÑ€ÑÑ‹?Â» Ð¿Ñ€Ð¸ Ð¾Ñ„â€‘Ð»Ð°Ð¹Ð½ >â€¯7Â Ð´Ð½ÐµÐ¹.  

---