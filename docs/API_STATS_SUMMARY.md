# API Endpoint: `/api/v1/stats/summary`

> üìä –û–ø–∏—Å–∞–Ω–∏–µ endpoint'–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–æ–¥–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
> –í–µ—Ä—Å–∏—è: 1.0 ¬∑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10

---

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**Endpoint:** `GET /api/v1/stats/summary`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–π —Å–≤–æ–¥–∫–∏ –ø–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (–ø—É–±–ª–∏—á–Ω—ã–π endpoint)
**–ú–µ—Ç–æ–¥:** `GET`

---

## –û–ø–∏—Å–∞–Ω–∏–µ

Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º —Å–æ–±—ã—Ç–∏—è–º –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, —Å–æ–±—Ä–∞–Ω–Ω—ã–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Convertik. –î–∞–Ω–Ω—ã–µ –≤–∫–ª—é—á–∞—é—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ —Å–µ–≥–æ–¥–Ω—è –∏ —Ç–æ–ø –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—ã—Ö —Å–æ–±—ã—Ç–∏–π.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

```json
{
  "total_events": 10000,
  "unique_devices": 500,
  "events_today": 200,
  "top_events": [
    {"event": "app_open", "count": 8000},
    {"event": "conversion", "count": 1500},
    {"event": "ad_impression", "count": 500}
  ]
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `total_events` | `integer` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è |
| `unique_devices` | `integer` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–∞–Ω–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) |
| `events_today` | `integer` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è (–ø–æ UTC) |
| `top_events` | `array` | –ú–∞—Å—Å–∏–≤ –∏–∑ —Ç–æ–ø-10 —Å–æ–±—ã—Ç–∏–π, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —á–∞—Å—Ç–æ—Ç–µ |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ `top_events`

```json
{
  "event": "string",  // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "app_open", "conversion")
  "count": 123        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –∫–æ–≥–¥–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ
}
```

---

## –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–ª–µ–¥—É—é—â–∏–º —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π (—Å–º. `top_events`):

| –°–æ–±—ã—Ç–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|---------|----------|-----------|
| `app_open` | –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | ‚Äî |
| `conversion` | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç | `from`, `to`, `amount` |
| `currency_added` | –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª—é—Ç–∞ –≤ —Å–ø–∏—Å–æ–∫ | `code` |
| `currency_removed` | –£–¥–∞–ª–µ–Ω–∞ –≤–∞–ª—é—Ç–∞ | `code` |
| `ad_impression` | –ü–æ–∫–∞–∑ —Ä–µ–∫–ª–∞–º—ã (AdMob) | `ad_unit_id` |
| `ad_click` | –ö–ª–∏–∫ –ø–æ —Ä–µ–∫–ª–∞–º–µ | `ad_unit_id` |
| `subscribe_start` | –û—Ç–∫—Ä—ã—Ç Paywall | `plan_id` |
| `subscribe_success` | –£—Å–ø–µ—à–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ (StoreKit) | `plan_id`, `price`, `trial` |
| `subscribe_renew` | –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ | `plan_id`, `period` |
| `subscribe_cancel` | –û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ | `reason` |
| `rates_refresh` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ (pull-to-refresh) | `network_ms` |
| `push_open` | –û—Ç–∫—Ä—ã—Ç–∏–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | `campaign_id` |

---

## –ë–∏–∑–Ω–µ—Å-–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π

### 1. `total_events` ‚Äî –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –û–±—â—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è
- –ú–∞—Å—à—Ç–∞–± —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- ‚úÖ **–†–æ—Å—Ç** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚ö†Ô∏è **–°–Ω–∏–∂–µ–Ω–∏–µ** ‚Üí –í–æ–∑–º–æ–∂–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ (–º–µ—Å—è—Ü –∫ –º–µ—Å—è—Ü—É)
- –û—Ü–µ–Ω–∫–∞ –º–∞—Å—à—Ç–∞–±–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è BI-—Å–∏—Å—Ç–µ–º

---

### 2. `unique_devices` ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–æ `device_id`)
- –†–∞–∑–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –±–∞–∑—ã

**–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- –ë–∞–∑–æ–≤—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ DAU/WAU/MAU
- –û—Å–Ω–æ–≤–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π –∏ ARPU

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ü–µ–Ω–∫–∞ –æ—Ö–≤–∞—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `ARPU = revenue / unique_devices`
- –û—Ü–µ–Ω–∫–∞ —Ä–æ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –±–∞–∑—ã

---

### 3. `events_today` ‚Äî –°–æ–±—ã—Ç–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è (–ø–æ UTC)
- –ï–∂–µ–¥–Ω–µ–≤–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- ‚úÖ **–í—ã—Å–æ–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** ‚Üí –ê–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚ö†Ô∏è **–ù–∏–∑–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** ‚Üí –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –Ω–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω–æ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UTC —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –ó–∞–ø—Ä–æ—Å: `WHERE created_at >= (NOW() AT TIME ZONE 'UTC')::date`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –¥–Ω—è–º–∏

---

### 4. `top_events` ‚Äî –¢–æ–ø —Å–æ–±—ã—Ç–∏–π –ø–æ —á–∞—Å—Ç–æ—Ç–µ

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–≤–µ—Ä—à–∞—é—Ç —á–∞—â–µ –≤—Å–µ–≥–æ
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π

**–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**

| –ü–∞—Ç—Ç–µ—Ä–Ω | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è |
|---------|---------------|
| –ú–Ω–æ–≥–æ `conversion` | ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é |
| –ú–Ω–æ–≥–æ `app_open`, –º–∞–ª–æ `conversion` | ‚ö†Ô∏è –ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
| –ú–Ω–æ–≥–æ `ad_impression` | üí∞ –í—ã—Å–æ–∫–∏–π —Ä–µ–∫–ª–∞–º–Ω—ã–π –¥–æ—Ö–æ–¥ |
| –ú–Ω–æ–≥–æ `subscribe_success` | üíé –í—ã—Å–æ–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–¥–ø–∏—Å–∫—É |
| –ú–Ω–æ–≥–æ `subscribe_start`, –º–∞–ª–æ `subscribe_success` | ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –≤ –≤–æ—Ä–æ–Ω–∫–µ –ø–æ–¥–ø–∏—Å–∫–∏ |

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π
- –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –≤ –≤–æ—Ä–æ–Ω–∫–∞—Ö –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ó–¥–æ—Ä–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç

```json
{
  "total_events": 10000,
  "unique_devices": 500,
  "events_today": 200,
  "top_events": [
    {"event": "app_open", "count": 8000},
    {"event": "conversion", "count": 1500},
    {"event": "ad_impression", "count": 500}
  ]
}
```

**–ê–Ω–∞–ª–∏–∑:**
- –°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: `10000 / 500 = 20` —Å–æ–±—ã—Ç–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è: `200 / 500 = 40%` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–∫—Ç–∏–≤–Ω—ã —Å–µ–≥–æ–¥–Ω—è
- –í—ã—Å–æ–∫–∞—è –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å: –º–Ω–æ–≥–æ `conversion` ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é

---

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ–±–ª–µ–º–∞ —Å–æ —Å–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö

```json
{
  "total_events": 5,
  "unique_devices": 2,
  "events_today": 0,
  "top_events": [
    {"event": "test_event", "count": 2}
  ]
}
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚ö†Ô∏è –û—á–µ–Ω—å –º–∞–ª–æ —Å–æ–±—ã—Ç–∏–π ‚Üí –≤–æ–∑–º–æ–∂–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ —Å–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è `events_today: 0` ‚Üí –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–µ–≥–æ–¥–Ω—è –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º
- ‚ö†Ô∏è `test_event` –≤ —Ç–æ–ø–µ ‚Üí —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

–ù–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö endpoint'–∞ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å:

### 1. –°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
–°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å = total_events / unique_devices
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- –í—ã—Å–æ–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –í—ã—Å–æ–∫–∞—è –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∏–∑–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã

### 2. –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è

```
–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è = events_today / unique_devices
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –¥–µ–Ω—å
- –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 0.4-2.0 (40-200% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–∫—Ç–∏–≤–Ω—ã)

### 3. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

–ê–Ω–∞–ª–∏–∑ `top_events` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ
- –ì–¥–µ –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –≤ –≤–æ—Ä–æ–Ω–∫–∞—Ö
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è endpoint'–∞:

1. ‚ùå **–ù–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ "—Å–µ–≥–æ–¥–Ω—è" –∏ "–≤—Å—ë –≤—Ä–µ–º—è"
2. ‚ùå **–ù–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º** ‚Äî —Å–ª–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å —Ç—Ä–µ–Ω–¥—ã
3. ‚ùå **–ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π** ‚Äî –Ω–µ–ª—å–∑—è –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—é
4. ‚ùå **–ù–µ—Ç —Ä–∞—Å—á—ë—Ç–∞ DAU/WAU/MAU** ‚Äî —Ç–æ–ª—å–∫–æ `unique_devices` –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `?period=day|week|month`
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—á—ë—Ç DAU/WAU/MAU
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª:** `backend/app/routes/stats.py`
**–§—É–Ω–∫—Ü–∏—è:** `get_stats_summary()`

### SQL-–∑–∞–ø—Ä–æ—Å—ã

```sql
-- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π
SELECT COUNT(*) FROM usage_events

-- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
SELECT COUNT(DISTINCT device_id) FROM usage_events

-- –°–æ–±—ã—Ç–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è (UTC)
SELECT COUNT(*) FROM usage_events
WHERE created_at >= (NOW() AT TIME ZONE 'UTC')::date

-- –¢–æ–ø —Å–æ–±—ã—Ç–∏–π
SELECT event_name, COUNT(*) as count
FROM usage_events
GROUP BY event_name
ORDER BY count DESC
LIMIT 10
```

### –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å

- –í—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ UTC (`timezone=True`)
- –ó–∞–ø—Ä–æ—Å `events_today` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UTC –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç 2025-12-10: –∑–∞–º–µ–Ω–∞ `CURRENT_DATE` –Ω–∞ `(NOW() AT TIME ZONE 'UTC')::date`

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ 500 ‚Äî Internal Server Error

```json
{
  "code": 500,
  "message": "Failed to get statistics summary",
  "details": {
    "error": "Error message"
  }
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

---

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### cURL

```bash
curl -X GET "https://api.convertik.ponravilos.ru/api/v1/stats/summary" \
  -H "Content-Type: application/json"
```

### Python

```python
import requests

response = requests.get("https://api.convertik.ponravilos.ru/api/v1/stats/summary")
data = response.json()

print(f"Total events: {data['total_events']}")
print(f"Unique devices: {data['unique_devices']}")
print(f"Events today: {data['events_today']}")
print(f"Top events: {data['top_events']}")
```

### JavaScript

```javascript
fetch('https://api.convertik.ponravilos.ru/api/v1/stats/summary')
  .then(response => response.json())
  .then(data => {
    console.log('Total events:', data.total_events);
    console.log('Unique devices:', data.unique_devices);
    console.log('Events today:', data.events_today);
    console.log('Top events:', data.top_events);
  });
```

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [ANALYTICS.md](./ANALYTICS.md) ‚Äî –ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- [API.md](./API.md) ‚Äî –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [TECHNICAL_SPEC.md](./TECHNICAL_SPEC.md) ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –î–∞—Ç–∞ | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|--------|-----------|
| 2025-12-10 | 1.0 | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ `events_today` (UTC) |
| 2025-12-10 | 1.0 | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–±—ã—Ç–∏–π (timezone-aware) |
| 2025-12-10 | 1.0 | –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.



