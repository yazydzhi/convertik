# Standard iOS Drag Handle Implementation for Currency Cards

## Overview
Реализован стандартный iOS drag handle для карточек валют в приложении Convertik. Используется встроенный SwiftUI `.onMove` модификатор, который автоматически показывает стандартные drag handles справа и сохраняет порядок валют в UserDefaults. Удаление валют отключено для упрощения интерфейса.

## Changes Made

### 1. MainListView.swift
- **Стандартный SwiftUI drag handle**: Использует `.onMove` модификатор для перемещения
- **Автоматические drag handles**: SwiftUI автоматически показывает стандартные drag handles справа
- **Сохранение позиций**: Порядок валют автоматически сохраняется в UserDefaults через SettingsService
- **Защита рубля**: Используется `.moveDisabled` для предотвращения перемещения RUB
- **Режим редактирования**: `.environment(\.editMode, .constant(.active))` для постоянного отображения drag handles
- **Убрано удаление**: Удалены красные значки удаления слева для чистоты интерфейса

### 2. CurrencyRowView.swift
- **Упрощенная структура**: Убран кастомный drag handle
- **Стандартный вид**: Теперь используется встроенный SwiftUI drag handle
- **Выравнивание**: Сохранено пустое место для выравнивания с иконкой дома RUB

### 3. SettingsService.swift
- **Автоматическое сохранение**: Порядок валют сохраняется в UserDefaults при каждом изменении
- **Защита RUB**: RUB всегда остается в первой позиции
- **Валидация**: Проверки предотвращают перемещение RUB или перемещение валют на позицию RUB

## Features

### Standard iOS Drag Handle
- **Нативный вид**: Автоматически генерируемые SwiftUI drag handles
- **Стандартное поведение**: Полностью соответствует iOS Human Interface Guidelines
- **Автоматическое позиционирование**: Drag handles появляются справа от карточек
- **Встроенная анимация**: SwiftUI обеспечивает плавные анимации перемещения

### Clean Interface
- **Только перемещение**: Убраны красные значки удаления для чистоты интерфейса
- **Фокус на функциональности**: Пользователь может сосредоточиться на организации валют
- **Минималистичный дизайн**: Только необходимые элементы управления

### Persistence
- **Автоматическое сохранение**: Порядок валют сохраняется в UserDefaults
- **Восстановление при запуске**: Порядок восстанавливается при перезапуске приложения
- **Защита данных**: RUB всегда остается в первой позиции

### User Experience
- **Интуитивность**: Стандартные iOS drag handles знакомы пользователям
- **Надежность**: Встроенная система SwiftUI обеспечивает стабильную работу
- **Производительность**: Оптимизированная встроенная система drag and drop
- **Чистота интерфейса**: Отсутствие лишних элементов управления

## Technical Implementation

### SwiftUI .onMove Modifier
```swift
.onMove(perform: moveCurrencies)
.environment(\.editMode, .constant(.active))
.moveDisabled(item.rate.code == "RUB")
```

### SettingsService Integration
```swift
func moveCurrency(from: IndexSet, to: Int) {
    // Автоматическое сохранение в UserDefaults
    currencies.move(fromOffsets: from, toOffset: to)
    userCurrencies = currencies
}
```

## Usage
1. Пользователь видит стандартные iOS drag handles справа от карточек валют (кроме RUB)
2. При перетаскивании карточка следует за пальцем с плавной анимацией
3. При отпускании валюта перемещается в новую позицию
4. Порядок автоматически сохраняется и восстанавливается при перезапуске
5. RUB остается в первой позиции и не может быть перемещен
6. Удаление валют отключено для упрощения интерфейса

## Testing
- ✅ Проект успешно компилируется без ошибок
- ✅ Стандартные iOS drag handles отображаются корректно
- ✅ Красные значки удаления убраны
- ✅ Перемещение валют работает плавно
- ✅ Порядок валют сохраняется в UserDefaults
- ✅ RUB защищен от перемещения
- ✅ Приложение успешно установлено и запущено на симуляторе iPhone 16 