import Foundation

struct Rate: Codable, Identifiable, Hashable {
    let code: String
    let name: String
    let value: Double // Сколько рублей за 1 единицу валюты
    let updatedAt: Date

    var id: String { code }

    init(code: String, name: String, value: Double, updatedAt: Date = Date()) {
        self.code = code
        self.name = name
        self.value = value
        self.updatedAt = updatedAt
    }
}

extension Rate {
    // Конвертация из CoreData
    init(from entity: RateEntity) {
        self.code = entity.code
        self.name = entity.name
        self.value = entity.value
        self.updatedAt = entity.updatedAt
    }

    // Статический словарь названий валют (fallback)
    static let currencyNames: [String: String] = [
        "RUB": "Российский рубль",
        "USD": "Доллар США",
        "EUR": "Евро",
        "GBP": "Фунт стерлингов",
        "CNY": "Китайский юань",
        "JPY": "Японская иена",
        "CHF": "Швейцарский франк",
        "CAD": "Канадский доллар",
        "AUD": "Австралийский доллар",
        "TRY": "Турецкая лира",
        "AED": "Дирхам ОАЭ",
        "AFN": "Афганский афгани",
        "ALL": "Албанский лек",
        "AMD": "Армянский драм",
        "ANG": "Нидерландский антильский гульден",
        "AOA": "Ангольская кванза",
        "ARS": "Аргентинский песо",
        "AWG": "Арубанский флорин",
        "AZN": "Азербайджанский манат",
        "BAM": "Конвертируемая марка Боснии и Герцеговины",
        "BBD": "Барбадосский доллар",
        "BDT": "Бангладешская така",
        "BGN": "Болгарский лев",
        "BHD": "Бахрейнский динар",
        "BIF": "Бурундийский франк",
        "BMD": "Бермудский доллар",
        "BND": "Брунейский доллар",
        "BOB": "Боливийский боливиано",
        "BRL": "Бразильский реал",
        "BSD": "Багамский доллар",
        "BTC": "Биткоин",
        "BTN": "Бутанский нгултрум",
        "BWP": "Ботсванская пула",
        "BYN": "Белорусский рубль",
        "BZD": "Белизский доллар",
        "CDF": "Конголезский франк",
        "CLF": "Чилийская расчетная единица",
        "CLP": "Чилийский песо",
        "CNH": "Китайский юань (офшорный)",
        "COP": "Колумбийский песо",
        "CRC": "Костариканский колон",
        "CUC": "Кубинский конвертируемый песо",
        "CUP": "Кубинский песо",
        "CVE": "Эскудо Кабо-Верде",
        "CZK": "Чешская крона",
        "DJF": "Джибутийский франк",
        "DKK": "Датская крона",
        "DOP": "Доминиканский песо",
        "DZD": "Алжирский динар",
        "EGP": "Египетский фунт",
        "ERN": "Эритрейская накфа",
        "ETB": "Эфиопский быр",
        "FJD": "Фиджийский доллар",
        "FKP": "Фунт Фолклендских островов",
        "GEL": "Грузинский лари",
        "GGP": "Гернсийский фунт",
        "GHS": "Ганский седи",
        "GIP": "Гибралтарский фунт",
        "GMD": "Гамбийский даласи",
        "GNF": "Гвинейский франк",
        "GTQ": "Гватемальский кетсаль",
        "GYD": "Гайанский доллар",
        "HKD": "Гонконгский доллар",
        "HNL": "Гондурасская лемпира",
        "HRK": "Хорватская куна",
        "HTG": "Гаитянский гурд",
        "HUF": "Венгерский форинт",
        "IDR": "Индонезийская рупия",
        "ILS": "Израильский шекель",
        "IMP": "Мэнский фунт",
        "INR": "Индийская рупия",
        "IQD": "Иракский динар",
        "IRR": "Иранский риал",
        "ISK": "Исландская крона",
        "JEP": "Джерсийский фунт",
        "JMD": "Ямайский доллар",
        "JOD": "Иорданский динар",
        "KES": "Кенийский шиллинг",
        "KGS": "Киргизский сом",
        "KHR": "Камбоджийский риель",
        "KMF": "Коморский франк",
        "KPW": "Северокорейская вона",
        "KRW": "Южнокорейская вона",
        "KWD": "Кувейтский динар",
        "KYD": "Доллар Каймановых островов",
        "KZT": "Казахстанский тенге",
        "LAK": "Лаосский кип",
        "LBP": "Ливанский фунт",
        "LKR": "Шри-ланкийская рупия",
        "LRD": "Либерийский доллар",
        "LSL": "Лесотский лоти",
        "LYD": "Ливийский динар",
        "MAD": "Марокканский дирхам",
        "MDL": "Молдавский лей",
        "MGA": "Малагасийский ариари",
        "MKD": "Македонский денар",
        "MMK": "Мьянманский кьят",
        "MNT": "Монгольский тугрик",
        "MOP": "Патака Макао",
        "MRU": "Мавританская угия",
        "MUR": "Маврикийская рупия",
        "MVR": "Мальдивская руфия",
        "MWK": "Малавийская квача",
        "MXN": "Мексиканский песо",
        "MYR": "Малайзийский ринггит",
        "MZN": "Мозамбикский метикал",
        "NAD": "Намибийский доллар",
        "NGN": "Нигерийская найра",
        "NIO": "Никарагуанская кордоба",
        "NOK": "Норвежская крона",
        "NPR": "Непальская рупия",
        "NZD": "Новозеландский доллар",
        "OMR": "Оманский риал",
        "PAB": "Панамский бальбоа",
        "PEN": "Перуанский соль",
        "PGK": "Папуа-новогвинейская кина",
        "PHP": "Филиппинский песо",
        "PKR": "Пакистанская рупия",
        "PLN": "Польский злотый",
        "PYG": "Парагвайский гуарани",
        "QAR": "Катарский риал",
        "RON": "Румынский лей",
        "RSD": "Сербский динар",
        "RWF": "Руандский франк",
        "SAR": "Саудовский риял",
        "SBD": "Доллар Соломоновых островов",
        "SCR": "Сейшельская рупия",
        "SDG": "Суданский фунт",
        "SEK": "Шведская крона",
        "SGD": "Сингапурский доллар",
        "SHP": "Фунт Святой Елены",
        "SLE": "Сьерра-леонский леоне",
        "SLL": "Сьерра-леонский леоне (старый)",
        "SOS": "Сомалийский шиллинг",
        "SRD": "Суринамский доллар",
        "SSP": "Южносуданский фунт",
        "STD": "Добра Сан-Томе и Принсипи",
        "STN": "Добра Сан-Томе и Принсипи (новый)",
        "SVC": "Сальвадорский колон",
        "SYP": "Сирийский фунт",
        "SZL": "Свазилендский лилангени",
        "THB": "Тайский бат",
        "TJS": "Таджикский сомони",
        "TMT": "Туркменский манат",
        "TND": "Тунисский динар",
        "TOP": "Тонганская паанга",
        "TTD": "Доллар Тринидада и Тобаго",
        "TWD": "Новый тайваньский доллар",
        "TZS": "Танзанийский шиллинг",
        "UAH": "Украинская гривна",
        "UGX": "Угандийский шиллинг",
        "UYU": "Уругвайский песо",
        "UZS": "Узбекский сум",
        "VES": "Венесуэльский боливар",
        "VND": "Вьетнамский донг",
        "VUV": "Вануатский вату",
        "WST": "Самоанская тала",
        "XAF": "Центральноафриканский франк КФА",
        "XAG": "Серебро (тройская унция)",
        "XAU": "Золото (тройская унция)",
        "XCD": "Восточнокарибский доллар",
        "XCG": "Восточнокарибский доллар (старый)",
        "XDR": "Специальные права заимствования",
        "XOF": "Западноафриканский франк КФА",
        "XPD": "Палладий (тройская унция)",
        "XPF": "Франк КФП",
        "XPT": "Платина (тройская унция)",
        "YER": "Йеменский риал",
        "ZAR": "Южноафриканский рэнд",
        "ZMW": "Замбийская квача",
        "ZWG": "Зимбабвийский доллар (старый)",
        "ZWL": "Зимбабвийский доллар (новый)"
    ]

    var displayName: String {
        if name.isEmpty {
            return code
        }
        return name
    }
}
