# Convertik iOS App

–ù–∞—Ç–∏–≤–Ω–æ–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞.

**üéâ –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: 1.2**  
**üåê Production API:** https://convertik.ponravilos.ru

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è** –≤–∞–ª—é—Ç –≤ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫—É—Ä—Å–æ–≤ –≤ —Ñ–æ–Ω–µ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤  
- **Premium –ø–æ–¥–ø–∏—Å–∫–∞** —Å –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–µ–∫–ª–∞–º—ã —á–µ—Ä–µ–∑ StoreKit2
- **–¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ backend –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX
- **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö
- **–ë–∞–∑–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã** –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **UI**: SwiftUI 5 + Combine
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: MVVM 
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: CoreData –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω –∫—ç—à–∞ –∫—É—Ä—Å–æ–≤
- **–°–µ—Ç—å**: URLSession + async/await –¥–ª—è API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è**: StoreKit2 + AdMob SDK
- **–§–æ–Ω**: BackgroundTasks –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è**: iOS 15.0
- **–°–±–æ—Ä–∫–∞**: xcodegen –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

## üì± –≠–∫—Ä–∞–Ω—ã

### MainListView
- –°–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç —Å —Ç–µ–∫—É—â–∏–º–∏ –∫—É—Ä—Å–∞–º–∏
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å—É–º–º—ã –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- Pull-to-refresh –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤
- AdMob –±–∞–Ω–Ω–µ—Ä (—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–ª—è Premium)

### AddCurrencyView  
- –ü–æ–∏—Å–∫ –≤–∞–ª—é—Ç —Å debounce
- –°–µ–∫—Ü–∏–∏ "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ" –∏ "–í—Å–µ –≤–∞–ª—é—Ç—ã"
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª—é—Ç –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–ø–∏—Å–æ–∫

### SettingsView
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
- –ü–µ—Ä–µ—Ö–æ–¥ –∫ Premium –ø–æ–¥–ø–∏—Å–∫–µ
- –°—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É –∏ —É—Å–ª–æ–≤–∏—è

### PaywallView
- –°–ø–∏—Å–æ–∫ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ Premium
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è StoreKit2 –¥–ª—è –ø–æ–∫—É–ø–∫–∏
- –ö–Ω–æ–ø–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
frontend/ios/
‚îú‚îÄ‚îÄ Convertik/              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ App/                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConvertikApp.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ContentView.swift
‚îÇ   ‚îú‚îÄ‚îÄ Models/             # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Rate.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserCurrency.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ APIModels.swift
‚îÇ   ‚îú‚îÄ‚îÄ Services/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RatesRepository.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ APIService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConversionService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StoreService.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BackgroundService.swift
‚îÇ   ‚îú‚îÄ‚îÄ Persistence/        # CoreData —Å—Ç–µ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CoreDataStack.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RateEntity+CoreDataClass.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ConvertikDataModel.xcdatamodeld
‚îÇ   ‚îú‚îÄ‚îÄ Modules/            # UI –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MainCurrencyList/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddCurrency/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settings/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Paywall/
‚îÇ   ‚îî‚îÄ‚îÄ Components/         # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ AdBannerView.swift
‚îú‚îÄ‚îÄ project.yml             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è xcodegen
‚îú‚îÄ‚îÄ Info.plist              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ Convertik.xcodeproj/    # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç Xcode
```

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–ó–∞–ø—É—Å–∫**: –ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤ –∏–∑ CoreData ‚Üí UI –≥–æ—Ç–æ–≤ < 0.3—Å
2. **–§–æ–Ω**: –ó–∞–ø—Ä–æ—Å fresh –∫—É—Ä—Å–æ–≤ —Å API ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CoreData
3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –±–µ–∑ —Å–µ—Ç–∏
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ë–∞—Ç—á–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ `/stats` API
5. **Premium**: StoreKit2 –ø–æ–∫—É–ø–∫–∞ ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ `/iap/verify`
6. **–û—Ñ—Ñ–ª–∞–π–Ω**: –ë–∞–∑–æ–≤—ã–µ –≤–∞–ª—é—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

## üõ† –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Xcode 15.0+
- iOS 15.0+ (device/simulator)
- Swift 5.9+
- xcodegen (—É—Å—Ç–∞–Ω–æ–≤–∫–∞: `brew install xcodegen`)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ xcodegen
brew install xcodegen

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ iOS runtime (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
xcodebuild -downloadPlatform iOS
```

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç**:
```bash
cd frontend/ios
xcodegen generate
```

3. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä**:
```bash
# –°–±–æ—Ä–∫–∞
xcodebuild -project Convertik.xcodeproj -scheme Convertik -destination "platform=iOS Simulator,name=iPhone 16 Pro" -derivedDataPath ./build build

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
xcodebuild -project Convertik.xcodeproj -scheme Convertik -destination "platform=iOS Simulator,name=iPhone 16 Pro" -derivedDataPath ./build install

# –ó–∞–ø—É—Å–∫
xcrun simctl launch <SIMULATOR_UDID> com.azg.Convertik
```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∏–º—É–ª—è—Ç–æ—Ä**:
```bash
open -a Simulator
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `Info.plist`:
- `BGTaskSchedulerPermittedIdentifiers` –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- `NSAppTransportSecurity` –¥–ª—è HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- Bundle Identifier: `com.azg.Convertik`
- –í–µ—Ä—Å–∏—è: 1.2 (CFBundleShortVersionString)

### API Endpoint

–í `APIService.swift` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–∞–∑–æ–≤—ã–π URL:
- **Production**: `https://convertik.ponravilos.ru/api/v1`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Unit —Ç–µ—Å—Ç—ã
xcodebuild test -scheme Convertik -destination "platform=iOS Simulator,name=iPhone 16 Pro"

# SwiftLint –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
swiftlint

# Snapshot —Ç–µ—Å—Ç—ã UI
xcodebuild test -scheme ConvertikSnapshotTests
```

## üöÄ –î–µ–ø–ª–æ–π

### TestFlight (Beta)
1. Archive –≤ Xcode
2. Upload to App Store Connect
3. Processing ‚Üí TestFlight Beta Testing

### App Store
1. –í–µ—Ä—Å–∏—è –≥–æ—Ç–æ–≤–∞ –≤ TestFlight
2. Create App Store Version
3. Submit for Review
4. Release –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è

## üîí Privacy & Security

- **–ê–Ω–æ–Ω–∏–º–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**: —Ç–æ–ª—å–∫–æ Device UUID, –±–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **App Transport Security**: HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω API
- **StoreKit**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∫—É–ø–æ–∫ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
- **Keychain**: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ Premium —Å—Ç–∞—Ç—É—Å–∞

## üéØ Roadmap

- [ ] **Widget –¥–ª—è iOS 17**: –∫—É—Ä—Å—ã –Ω–∞ Home Screen
- [ ] **Apple Watch**: –∫–æ–º–ø–∞–Ω—å–æ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] **Spotlight –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ø–æ–∏—Å–∫ –∫—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ Spotlight
- [ ] **Shortcuts**: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Siri Shortcuts
- [ ] **CarPlay**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ

## üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è:
- `app_open` - –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
- `conversion` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç
- `currency_added/removed` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º
- `subscribe_start/success` - –≤–æ—Ä–æ–Ω–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- `ad_impression` - –ø–æ–∫–∞–∑—ã —Ä–µ–∫–ª–∞–º—ã

–°–æ–±—ã—Ç–∏—è –±–∞—Ç—á–∞—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ backend –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–µ—Ç–∏.

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
xcrun simctl uninstall <SIMULATOR_UDID> com.azg.Convertik
xcodebuild -project Convertik.xcodeproj -scheme Convertik -destination "platform=iOS Simulator,name=iPhone 16 Pro" -derivedDataPath ./build install
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
plutil -p "/Users/azg/Library/Developer/CoreSimulator/Devices/<SIMULATOR_UDID>/data/Containers/Bundle/Application/*/Convertik.app/Info.plist" | grep -E "(CFBundleShortVersionString|CFBundleVersion)"
```

## ü§ù Contributing

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –≤ branch  
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

–°–ª–µ–¥—É–π—Ç–µ Swift Style Guide –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SwiftLint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞.